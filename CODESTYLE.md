# Стандарты кода

## Базовые правила
- PSR‑12, в каждом файле `declare(strict_types=1)`.
- Короткие, однонаправленные методы; избегать «божественных» объектов.
- Именование: понятные, самодокументирующиеся имена; без однобуквенных переменных.
- PHPDoc — для публичных методов и там, где типы неочевидны.

## Контроллеры и ответы
- Возвращать ответы только через `Helpers\Response`.
- В ошибках использовать RFC 7807 (`problem+json`).
- Валидировать входные данные: `trim`, `filter_var`, явные проверки диапазонов и размеров.

## Работа с БД
- Только подготовленные выражения (`prepare/execute`).
- Никаких строковых конкатенаций для SQL с пользовательскими данными.
- Ограничивать `SELECT` — `LIMIT`, явные поля, индексы по месту.

## Исключения и ошибки
- Исключения — для действительно исключительных ситуаций.
- Пользовательские сообщения — без деталей внутренней реализации.
- Логи — через `Helpers\Logger` с `X-Request-Id` для трассировки.

## TODO / FIXME
- `// TODO:` — запланированное улучшение.
- `// FIXME:` — известная проблема, влияющая на корректность/надёжность.

